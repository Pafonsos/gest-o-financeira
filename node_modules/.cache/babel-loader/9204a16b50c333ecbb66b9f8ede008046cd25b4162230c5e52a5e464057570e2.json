{"ast":null,"code":"import _objectSpread from\"C:/Users/ResTIC16/Desktop/gest-o-financeira/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{TrendingUp,DollarSign,AlertCircle,Calendar,Clock,CheckCircle,BarChart3,Briefcase,CreditCard,ArrowUpRight,ArrowDownRight,Wallet,Edit2,Plus,Trash2,X,Save,Download}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const DashboardFinanceiro=_ref=>{let{clientes=[]}=_ref;const[periodo,setPeriodo]=useState('mes');const[modalDespesas,setModalDespesas]=useState(false);const[modalMeta,setModalMeta]=useState(false);// Despesas editáveis (salvos no localStorage)\nconst[despesas,setDespesas]=useState(()=>{const salvas=localStorage.getItem('dashboard-despesas');return salvas?JSON.parse(salvas):[{categoria:'Folha de Pagamento',valor:45000,tipo:'fixa'},{categoria:'Aluguel/Infraestrutura',valor:8000,tipo:'fixa'},{categoria:'Equipamentos',valor:5000,tipo:'variavel'},{categoria:'Marketing',valor:3000,tipo:'variavel'},{categoria:'Impostos',valor:12000,tipo:'fixa'},{categoria:'Outros',valor:4000,tipo:'variavel'}];});// Meta mensal editável\nconst[metaMensal,setMetaMensal]=useState(()=>{const salva=localStorage.getItem('dashboard-meta-mensal');return salva?parseFloat(salva):100000;});const[novaDespesa,setNovaDespesa]=useState({categoria:'',valor:'',tipo:'fixa'});// Estado para edição de despesa\nconst[editandoDespesa,setEditandoDespesa]=useState(null);// Funções para gerenciar despesas\nconst adicionarDespesa=()=>{if(novaDespesa.categoria&&novaDespesa.valor){// Converte string de centavos para número\nconst valorNumerico=parseFloat(novaDespesa.valor)/100;setDespesas([...despesas,_objectSpread(_objectSpread({},novaDespesa),{},{valor:valorNumerico})]);setNovaDespesa({categoria:'',valor:'',tipo:'fixa'});}};const editarDespesa=index=>{setEditandoDespesa(index);// Se o valor for 0, armazena como string \"0\"\nconst valorEmCentavos=despesas[index].valor===0?'0':Math.round(despesas[index].valor*100).toString();setNovaDespesa(_objectSpread(_objectSpread({},despesas[index]),{},{valor:valorEmCentavos}));};const salvarEdicaoDespesa=()=>{if(novaDespesa.categoria&&novaDespesa.valor){const valorNumerico=parseFloat(novaDespesa.valor)/100;const novasDespesas=[...despesas];novasDespesas[editandoDespesa]=_objectSpread(_objectSpread({},novaDespesa),{},{valor:valorNumerico});setDespesas(novasDespesas);setEditandoDespesa(null);setNovaDespesa({categoria:'',valor:'',tipo:'fixa'});}};const removerDespesa=index=>{setDespesas(despesas.filter((_,i)=>i!==index));};const cancelarEdicao=()=>{setEditandoDespesa(null);setNovaDespesa({categoria:'',valor:'',tipo:'fixa'});};// Salvar despesas no localStorage\nuseEffect(()=>{localStorage.setItem('dashboard-despesas',JSON.stringify(despesas));},[despesas]);// Salvar meta no localStorage\nuseEffect(()=>{localStorage.setItem('dashboard-meta-mensal',metaMensal.toString());},[metaMensal]);const[metricas,setMetricas]=useState({receitaRealizada:0,receitaPrevista:0,receitaPendente:0,inadimplencia:0,previsaoProximoMes:0,despesasTotais:0,lucroOperacional:0,margemLucro:0,fluxoCaixa:0,clientesAtivos:0,clientesInadimplentes:0});useEffect(()=>{if(clientes){calcularMetricas();}},[clientes,despesas,periodo]);const calcularMetricas=()=>{// Garantir que clientes é um array válido\nconst clientesArray=Array.isArray(clientes)?clientes:[];if(clientesArray.length===0){// Se não há clientes, zera tudo\nsetMetricas({receitaRealizada:0,receitaPrevista:0,receitaPendente:0,inadimplencia:0,previsaoProximoMes:0,despesasTotais:despesas.reduce((sum,d)=>sum+d.valor,0),lucroOperacional:0,margemLucro:0,fluxoCaixa:0,clientesAtivos:0,clientesInadimplentes:0});return;}const hoje=new Date();const mesAtual=hoje.getMonth();const anoAtual=hoje.getFullYear();// Receitas\nconst receitaRealizada=clientesArray.reduce((sum,c)=>sum+(c.valorPago||0),0);const receitaPrevista=clientesArray.reduce((sum,c)=>sum+(c.valorTotal||0),0);const receitaPendente=receitaPrevista-receitaRealizada;// Inadimplência\nconst totalAtrasado=clientesArray.filter(c=>{if(!c.proximoVencimento)return false;return new Date(c.proximoVencimento)<hoje&&c.valorPago<c.valorTotal;}).reduce((sum,c)=>sum+(c.valorTotal-c.valorPago),0);const inadimplencia=receitaPrevista>0?totalAtrasado/receitaPrevista*100:0;const clientesInadimplentes=clientesArray.filter(c=>{if(!c.proximoVencimento)return false;return new Date(c.proximoVencimento)<hoje&&c.valorPago<c.valorTotal;}).length;// Previsão próximo mês\nconst proximoMes=new Date(anoAtual,mesAtual+1,1);const fimProximoMes=new Date(anoAtual,mesAtual+2,0);const previsaoProximoMes=clientesArray.filter(c=>{if(!c.proximoVencimento||c.valorPago>=c.valorTotal)return false;const venc=new Date(c.proximoVencimento);return venc>=proximoMes&&venc<=fimProximoMes;}).reduce((sum,c)=>sum+(c.valorParcela||0),0);// Despesas\nconst despesasTotais=despesas.reduce((sum,d)=>sum+d.valor,0);// Lucro e Margem\nconst lucroOperacional=receitaRealizada-despesasTotais;const margemLucro=receitaRealizada>0?lucroOperacional/receitaRealizada*100:0;// Fluxo de Caixa\nconst fluxoCaixa=lucroOperacional;// Clientes Ativos\nconst clientesAtivos=clientesArray.filter(c=>c.valorPago>0||c.proximoVencimento&&new Date(c.proximoVencimento)>=hoje).length;setMetricas({receitaRealizada,receitaPrevista,receitaPendente,inadimplencia,previsaoProximoMes,despesasTotais,lucroOperacional,margemLucro,fluxoCaixa,clientesAtivos,clientesInadimplentes});};const formatMoney=value=>{return new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(value);};// Função para formatação de input que lida com zero\nconst formatInputCurrency=value=>{// Se for string vazia, retorna string vazia\nif(value==='')return'';// Converte para string e remove caracteres não numéricos\nconst apenasNumeros=value.toString().replace(/\\D/g,'');// Se não há números, retorna vazio\nif(apenasNumeros==='')return'';// Converte para número em centavos\nconst numero=parseFloat(apenasNumeros)/100;// Se for NaN ou zero, mostra R$ 0,00\nif(isNaN(numero)||numero===0)return'R$ 0,00';// Formata normalmente\nreturn numero.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});};// Função para exportar dados do dashboard\nconst exportarDashboard=()=>{const dataAtual=new Date().toLocaleDateString('pt-BR');const periodoTexto=periodo==='mes'?'Mensal':periodo==='trimestre'?'Trimestral':'Anual';// Preparar dados das métricas\nconst dadosMetricas=[['Relatório Financeiro',periodoTexto,dataAtual],[''],['MÉTRICAS PRINCIPAIS'],['Receita Realizada',formatMoney(metricas.receitaRealizada)],['Lucro Operacional',formatMoney(metricas.lucroOperacional)],['Margem de Lucro',\"\".concat(metricas.margemLucro.toFixed(2),\"%\")],['Receita Pendente',formatMoney(metricas.receitaPendente)],['Despesas Totais',formatMoney(metricas.despesasTotais)],[''],['MÉTRICAS SECUNDÁRIAS'],['Taxa de Inadimplência',\"\".concat(metricas.inadimplencia.toFixed(2),\"%\")],['Clientes Ativos',metricas.clientesAtivos.toString()],['Clientes Inadimplentes',metricas.clientesInadimplentes.toString()],['Previsão Próximo Mês',formatMoney(metricas.previsaoProximoMes)],['Meta Mensal',formatMoney(metaMensal)],[''],['DESPESAS DETALHADAS']];// Adicionar cabeçalhos das despesas\ndadosMetricas.push(['Categoria','Valor','Tipo']);// Adicionar cada despesa\ndespesas.forEach(despesa=>{dadosMetricas.push([despesa.categoria,formatMoney(despesa.valor),despesa.tipo==='fixa'?'Fixa':'Variável']);});// Converter para CSV\nconst csvContent=dadosMetricas.map(row=>row.map(cell=>\"\\\"\".concat(cell,\"\\\"\")).join(',')).join('\\n');// Criar e baixar o arquivo\nconst blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const link=document.createElement('a');const url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',\"dashboard-financeiro-\".concat(dataAtual.replace(/\\//g,'-'),\".csv\"));link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);};const MetricCard=_ref2=>{let{title,value,subtitle,icon:Icon,color,trend,highlight}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-all \".concat(highlight?'ring-2 ring-blue-500':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-lg \".concat(color),children:/*#__PURE__*/_jsx(Icon,{className:\"w-6 h-6\"})}),trend!==undefined&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-sm font-medium \".concat(trend>=0?'text-green-600':'text-red-600'),children:[trend>=0?/*#__PURE__*/_jsx(ArrowUpRight,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(ArrowDownRight,{className:\"w-4 h-4\"}),Math.abs(trend).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:value}),subtitle&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:subtitle})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Vis\\xE3o Geral Financeira\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Acompanhamento em tempo real\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPeriodo('mes'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(periodo==='mes'?'bg-blue-600 text-white':'bg-white text-gray-700 hover:bg-gray-100'),children:\"M\\xEAs\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPeriodo('trimestre'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(periodo==='trimestre'?'bg-blue-600 text-white':'bg-white text-gray-700 hover:bg-gray-100'),children:\"Trimestre\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPeriodo('ano'),className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(periodo==='ano'?'bg-blue-600 text-white':'bg-white text-gray-700 hover:bg-gray-100'),children:\"Ano\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportarDashboard,className:\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",title:\"Exportar dados do dashboard\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"Exportar\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(MetricCard,{title:\"Receita Realizada\",value:formatMoney(metricas.receitaRealizada),subtitle:\"\".concat((metricas.receitaRealizada/metricas.receitaPrevista*100||0).toFixed(1),\"% do previsto\"),icon:DollarSign,color:\"bg-green-100 text-green-600\",highlight:true}),/*#__PURE__*/_jsx(MetricCard,{title:\"Lucro Operacional\",value:formatMoney(metricas.lucroOperacional),subtitle:\"Margem: \".concat(metricas.margemLucro.toFixed(1),\"%\"),icon:TrendingUp,color:metricas.lucroOperacional>=0?\"bg-blue-100 text-blue-600\":\"bg-red-100 text-red-600\"}),/*#__PURE__*/_jsx(MetricCard,{title:\"Receita Pendente\",value:formatMoney(metricas.receitaPendente),subtitle:\"A receber\",icon:Clock,color:\"bg-yellow-100 text-yellow-600\"}),/*#__PURE__*/_jsx(MetricCard,{title:\"Despesas Totais\",value:formatMoney(metricas.despesasTotais),subtitle:\"M\\xEAs atual\",icon:CreditCard,color:\"bg-red-100 text-red-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(MetricCard,{title:\"Taxa de Inadimpl\\xEAncia\",value:\"\".concat(metricas.inadimplencia.toFixed(1),\"%\"),subtitle:\"\".concat(metricas.clientesInadimplentes,\" clientes inadimplentes\"),icon:AlertCircle,color:metricas.inadimplencia>10?\"bg-red-100 text-red-600\":\"bg-blue-100 text-blue-600\"}),/*#__PURE__*/_jsx(MetricCard,{title:\"Clientes Ativos\",value:metricas.clientesAtivos,subtitle:\"Com contratos vigentes\",icon:Briefcase,color:\"bg-teal-100 text-teal-600\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(Wallet,{className:\"w-6 h-6 text-blue-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900\",children:\"Fluxo de Caixa\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Entradas\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-green-600\",children:formatMoney(metricas.receitaRealizada)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-2 rounded-full\",style:{width:\"\".concat(Math.min(metricas.receitaRealizada/(metricas.receitaRealizada+metricas.despesasTotais)*100,100),\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Sa\\xEDdas\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-red-600\",children:formatMoney(metricas.despesasTotais)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500 h-2 rounded-full\",style:{width:\"\".concat(Math.min(metricas.despesasTotais/(metricas.receitaRealizada+metricas.despesasTotais)*100,100),\"%\")}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Saldo Final\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold \".concat(metricas.fluxoCaixa>=0?'text-green-600':'text-red-600'),children:formatMoney(metricas.fluxoCaixa)})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-6 h-6 text-blue-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-blue-900\",children:\"Previs\\xE3o Pr\\xF3ximo M\\xEAs\"})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-blue-900 mb-2\",children:formatMoney(metricas.previsaoProximoMes)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700 mb-4\",children:\"Receita prevista com vencimentos\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/50 rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-800 font-medium\",children:\"Meta Mensal\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setModalMeta(true),className:\"text-blue-600 hover:text-blue-800\",title:\"Editar meta\",children:/*#__PURE__*/_jsx(Edit2,{className:\"w-3 h-3\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-blue-900\",children:formatMoney(metaMensal)}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 w-full bg-blue-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-2 rounded-full transition-all\",style:{width:\"\".concat(Math.min(metricas.receitaRealizada/metaMensal*100,100),\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-700 mt-1\",children:[(metricas.receitaRealizada/metaMensal*100).toFixed(1),\"% atingido\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-6 h-6 text-orange-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900\",children:\"Distribui\\xE7\\xE3o de Despesas\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setModalDespesas(true),className:\"flex items-center gap-1 text-sm bg-orange-100 text-orange-700 px-3 py-1 rounded-lg hover:bg-orange-200 transition-colors\",children:[/*#__PURE__*/_jsx(Edit2,{className:\"w-3 h-3\"}),\"Editar\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:despesas.length>0?despesas.map((despesa,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:despesa.categoria}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:formatMoney(despesa.valor)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 rounded-full \".concat(despesa.tipo==='fixa'?'bg-orange-500':'bg-blue-500'),style:{width:\"\".concat(despesa.valor/metricas.despesasTotais*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[(despesa.valor/metricas.despesasTotais*100).toFixed(1),\"% do total \\u2022 \",despesa.tipo==='fixa'?'Fixa':'Variável']})]},index)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"Nenhuma despesa cadastrada\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Indicadores de Sa\\xFAde\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Margem de Lucro\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[metricas.margemLucro.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 rounded-full \".concat(metricas.margemLucro>=20?'bg-green-600':metricas.margemLucro>=10?'bg-yellow-600':'bg-red-600'),style:{width:\"\".concat(Math.min(Math.abs(metricas.margemLucro)*2,100),\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Taxa de Recebimento\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[(metricas.receitaRealizada/metricas.receitaPrevista*100||0).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-2 rounded-full\",style:{width:\"\".concat(metricas.receitaRealizada/metricas.receitaPrevista*100||0,\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-sm mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Inadimpl\\xEAncia\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[metricas.inadimplencia.toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 rounded-full \".concat(metricas.inadimplencia>10?'bg-red-600':'bg-green-600'),style:{width:\"\".concat(Math.min(metricas.inadimplencia*5,100),\"%\")}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 \".concat(metricas.margemLucro>=15&&metricas.inadimplencia<10?'text-green-600':'text-yellow-600')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(metricas.margemLucro>=15&&metricas.inadimplencia<10?'text-green-600':'text-yellow-600'),children:metricas.margemLucro>=15&&metricas.inadimplencia<10?'Empresa financeiramente saudável':'Atenção aos indicadores'})]})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[metricas.inadimplencia>10&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-red-800 font-bold mb-1\",children:\"Alta Taxa de Inadimpl\\xEAncia\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-700 text-sm\",children:[metricas.clientesInadimplentes,\" clientes com pagamentos atrasados. Recomenda-se intensificar a cobran\\xE7a usando o sistema de email marketing.\"]})]})]})}),metricas.margemLucro<10&&metricas.receitaRealizada>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-yellow-800 font-bold mb-1\",children:\"Margem de Lucro Baixa\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-yellow-700 text-sm\",children:[\"Margem atual de \",metricas.margemLucro.toFixed(1),\"%. Considere revisar pre\\xE7os dos servi\\xE7os ou reduzir custos operacionais.\"]})]})]})}),metricas.lucroOperacional>0&&metricas.inadimplencia<10&&metricas.margemLucro>=15&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-green-800 font-bold mb-1\",children:\"Desempenho Excelente\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-700 text-sm\",children:\"Seus indicadores financeiros est\\xE3o saud\\xE1veis. Continue monitorando e considere expans\\xE3o de servi\\xE7os.\"})]})]})})]}),modalDespesas&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md max-h-[80vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900\",children:\"Gerenciar Despesas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setModalDespesas(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Categoria\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:novaDespesa.categoria,onChange:e=>setNovaDespesa(_objectSpread(_objectSpread({},novaDespesa),{},{categoria:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"Ex: Aluguel, Marketing...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Valor (R$)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formatInputCurrency(novaDespesa.valor),onChange:e=>{let valor=e.target.value.replace(/\\D/g,'');valor=valor.substring(0,10);// Permite que o usuário digite apenas \"0\"\nif(valor===''){setNovaDespesa(_objectSpread(_objectSpread({},novaDespesa),{},{valor:''}));}else if(valor==='0'){setNovaDespesa(_objectSpread(_objectSpread({},novaDespesa),{},{valor:'0'}));}else{// Remove zeros à esquerda (exceto se for \"0\")\nvalor=valor.replace(/^0+/,'');setNovaDespesa(_objectSpread(_objectSpread({},novaDespesa),{},{valor:valor}));}},onKeyDown:e=>{// Permite apagar completamente o campo\nif(e.key==='Backspace'&&novaDespesa.valor==='0'){setNovaDespesa(_objectSpread(_objectSpread({},novaDespesa),{},{valor:''}));}},className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"R$ 0,00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Tipo\"}),/*#__PURE__*/_jsxs(\"select\",{value:novaDespesa.tipo,onChange:e=>setNovaDespesa(_objectSpread(_objectSpread({},novaDespesa),{},{tipo:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"fixa\",children:\"Fixa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"variavel\",children:\"Vari\\xE1vel\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:editandoDespesa!==null?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:salvarEdicaoDespesa,className:\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 inline mr-1\"}),\"Salvar\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelarEdicao,className:\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Cancelar\"})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:adicionarDespesa,className:\"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 inline mr-1\"}),\"Adicionar\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Despesas Cadastradas\"}),despesas.map((despesa,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:despesa.categoria}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[formatMoney(despesa.valor),\" \\u2022 \",despesa.tipo==='fixa'?'Fixa':'Variável']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editarDespesa(index),className:\"p-1 text-blue-600 hover:bg-blue-100 rounded\",title:\"Editar\",children:/*#__PURE__*/_jsx(Edit2,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removerDespesa(index),className:\"p-1 text-red-600 hover:bg-red-100 rounded\",title:\"Remover\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]},index))]})]})}),modalMeta&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900\",children:\"Editar Meta Mensal\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setModalMeta(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Meta Mensal (R$)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:metaMensal===0?'R$ 0,00':formatInputCurrency(Math.round(metaMensal*100).toString()),onChange:e=>{let valor=e.target.value.replace(/\\D/g,'');valor=valor.substring(0,10);if(valor===''){setMetaMensal(0);}else if(valor==='0'){setMetaMensal(0);}else{// Remove zeros à esquerda e converte para número\nvalor=valor.replace(/^0+/,'');setMetaMensal(parseFloat(valor)/100);}},className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",placeholder:\"R$ 0,00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setModalMeta(false),className:\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 inline mr-1\"}),\"Salvar\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setModalMeta(false),className:\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Cancelar\"})]})]})]})})]});};export default DashboardFinanceiro;","map":{"version":3,"names":["React","useState","useEffect","TrendingUp","DollarSign","AlertCircle","Calendar","Clock","CheckCircle","BarChart3","Briefcase","CreditCard","ArrowUpRight","ArrowDownRight","Wallet","Edit2","Plus","Trash2","X","Save","Download","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DashboardFinanceiro","_ref","clientes","periodo","setPeriodo","modalDespesas","setModalDespesas","modalMeta","setModalMeta","despesas","setDespesas","salvas","localStorage","getItem","JSON","parse","categoria","valor","tipo","metaMensal","setMetaMensal","salva","parseFloat","novaDespesa","setNovaDespesa","editandoDespesa","setEditandoDespesa","adicionarDespesa","valorNumerico","_objectSpread","editarDespesa","index","valorEmCentavos","Math","round","toString","salvarEdicaoDespesa","novasDespesas","removerDespesa","filter","_","i","cancelarEdicao","setItem","stringify","metricas","setMetricas","receitaRealizada","receitaPrevista","receitaPendente","inadimplencia","previsaoProximoMes","despesasTotais","lucroOperacional","margemLucro","fluxoCaixa","clientesAtivos","clientesInadimplentes","calcularMetricas","clientesArray","Array","isArray","length","reduce","sum","d","hoje","Date","mesAtual","getMonth","anoAtual","getFullYear","c","valorPago","valorTotal","totalAtrasado","proximoVencimento","proximoMes","fimProximoMes","venc","valorParcela","formatMoney","value","Intl","NumberFormat","style","currency","format","formatInputCurrency","apenasNumeros","replace","numero","isNaN","toLocaleString","exportarDashboard","dataAtual","toLocaleDateString","periodoTexto","dadosMetricas","concat","toFixed","push","forEach","despesa","csvContent","map","row","cell","join","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","setAttribute","visibility","body","appendChild","click","removeChild","MetricCard","_ref2","title","subtitle","icon","Icon","color","trend","highlight","className","children","undefined","abs","onClick","width","min","onChange","e","target","placeholder","substring","onKeyDown","key"],"sources":["C:/Users/ResTIC16/Desktop/gest-o-financeira/src/components/dashboard/DashboardAprimorado.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { TrendingUp, DollarSign, AlertCircle, Calendar, Clock, CheckCircle, BarChart3, Briefcase, CreditCard, ArrowUpRight, ArrowDownRight, Wallet, Edit2, Plus, Trash2, X, Save, Download } from 'lucide-react';\r\n\r\nconst DashboardFinanceiro = ({ clientes = [] }) => {\r\n  const [periodo, setPeriodo] = useState('mes');\r\n  const [modalDespesas, setModalDespesas] = useState(false);\r\n  const [modalMeta, setModalMeta] = useState(false);\r\n  \r\n  // Despesas editáveis (salvos no localStorage)\r\n  const [despesas, setDespesas] = useState(() => {\r\n    const salvas = localStorage.getItem('dashboard-despesas');\r\n    return salvas ? JSON.parse(salvas) : [\r\n      { categoria: 'Folha de Pagamento', valor: 45000, tipo: 'fixa' },\r\n      { categoria: 'Aluguel/Infraestrutura', valor: 8000, tipo: 'fixa' },\r\n      { categoria: 'Equipamentos', valor: 5000, tipo: 'variavel' },\r\n      { categoria: 'Marketing', valor: 3000, tipo: 'variavel' },\r\n      { categoria: 'Impostos', valor: 12000, tipo: 'fixa' },\r\n      { categoria: 'Outros', valor: 4000, tipo: 'variavel' }\r\n    ];\r\n  });\r\n\r\n  // Meta mensal editável\r\n  const [metaMensal, setMetaMensal] = useState(() => {\r\n    const salva = localStorage.getItem('dashboard-meta-mensal');\r\n    return salva ? parseFloat(salva) : 100000;\r\n  });\r\n\r\n  const [novaDespesa, setNovaDespesa] = useState({\r\n    categoria: '',\r\n    valor: '',\r\n    tipo: 'fixa'\r\n  });\r\n\r\n  // Estado para edição de despesa\r\n  const [editandoDespesa, setEditandoDespesa] = useState(null);\r\n\r\n  // Funções para gerenciar despesas\r\n  const adicionarDespesa = () => {\r\n    if (novaDespesa.categoria && novaDespesa.valor) {\r\n      // Converte string de centavos para número\r\n      const valorNumerico = parseFloat(novaDespesa.valor) / 100;\r\n      setDespesas([...despesas, { ...novaDespesa, valor: valorNumerico }]);\r\n      setNovaDespesa({ categoria: '', valor: '', tipo: 'fixa' });\r\n    }\r\n  };\r\n\r\n  const editarDespesa = (index) => {\r\n    setEditandoDespesa(index);\r\n    \r\n    // Se o valor for 0, armazena como string \"0\"\r\n    const valorEmCentavos = despesas[index].valor === 0 \r\n      ? '0' \r\n      : Math.round(despesas[index].valor * 100).toString();\r\n      \r\n    setNovaDespesa({ \r\n      ...despesas[index], \r\n      valor: valorEmCentavos \r\n    });\r\n  };\r\n\r\n  const salvarEdicaoDespesa = () => {\r\n    if (novaDespesa.categoria && novaDespesa.valor) {\r\n      const valorNumerico = parseFloat(novaDespesa.valor) / 100;\r\n      const novasDespesas = [...despesas];\r\n      novasDespesas[editandoDespesa] = { \r\n        ...novaDespesa, \r\n        valor: valorNumerico \r\n      };\r\n      setDespesas(novasDespesas);\r\n      setEditandoDespesa(null);\r\n      setNovaDespesa({ categoria: '', valor: '', tipo: 'fixa' });\r\n    }\r\n  };\r\n\r\n  const removerDespesa = (index) => {\r\n    setDespesas(despesas.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const cancelarEdicao = () => {\r\n    setEditandoDespesa(null);\r\n    setNovaDespesa({ categoria: '', valor: '', tipo: 'fixa' });\r\n  };\r\n\r\n  // Salvar despesas no localStorage\r\n  useEffect(() => {\r\n    localStorage.setItem('dashboard-despesas', JSON.stringify(despesas));\r\n  }, [despesas]);\r\n\r\n  // Salvar meta no localStorage\r\n  useEffect(() => {\r\n    localStorage.setItem('dashboard-meta-mensal', metaMensal.toString());\r\n  }, [metaMensal]);\r\n\r\n  const [metricas, setMetricas] = useState({\r\n    receitaRealizada: 0,\r\n    receitaPrevista: 0,\r\n    receitaPendente: 0,\r\n    inadimplencia: 0,\r\n    previsaoProximoMes: 0,\r\n    despesasTotais: 0,\r\n    lucroOperacional: 0,\r\n    margemLucro: 0,\r\n    fluxoCaixa: 0,\r\n    clientesAtivos: 0,\r\n    clientesInadimplentes: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (clientes) {\r\n      calcularMetricas();\r\n    }\r\n  }, [clientes, despesas, periodo]);\r\n\r\n  const calcularMetricas = () => {\r\n    // Garantir que clientes é um array válido\r\n    const clientesArray = Array.isArray(clientes) ? clientes : [];\r\n    \r\n    if (clientesArray.length === 0) {\r\n      // Se não há clientes, zera tudo\r\n      setMetricas({\r\n        receitaRealizada: 0,\r\n        receitaPrevista: 0,\r\n        receitaPendente: 0,\r\n        inadimplencia: 0,\r\n        previsaoProximoMes: 0,\r\n        despesasTotais: despesas.reduce((sum, d) => sum + d.valor, 0),\r\n        lucroOperacional: 0,\r\n        margemLucro: 0,\r\n        fluxoCaixa: 0,\r\n        clientesAtivos: 0,\r\n        clientesInadimplentes: 0\r\n      });\r\n      return;\r\n    }\r\n\r\n    const hoje = new Date();\r\n    const mesAtual = hoje.getMonth();\r\n    const anoAtual = hoje.getFullYear();\r\n\r\n    // Receitas\r\n    const receitaRealizada = clientesArray.reduce((sum, c) => sum + (c.valorPago || 0), 0);\r\n    const receitaPrevista = clientesArray.reduce((sum, c) => sum + (c.valorTotal || 0), 0);\r\n    const receitaPendente = receitaPrevista - receitaRealizada;\r\n\r\n    // Inadimplência\r\n    const totalAtrasado = clientesArray\r\n      .filter(c => {\r\n        if (!c.proximoVencimento) return false;\r\n        return new Date(c.proximoVencimento) < hoje && c.valorPago < c.valorTotal;\r\n      })\r\n      .reduce((sum, c) => sum + (c.valorTotal - c.valorPago), 0);\r\n\r\n    const inadimplencia = receitaPrevista > 0 ? (totalAtrasado / receitaPrevista) * 100 : 0;\r\n    const clientesInadimplentes = clientesArray.filter(c => {\r\n      if (!c.proximoVencimento) return false;\r\n      return new Date(c.proximoVencimento) < hoje && c.valorPago < c.valorTotal;\r\n    }).length;\r\n\r\n    // Previsão próximo mês\r\n    const proximoMes = new Date(anoAtual, mesAtual + 1, 1);\r\n    const fimProximoMes = new Date(anoAtual, mesAtual + 2, 0);\r\n    \r\n    const previsaoProximoMes = clientesArray\r\n      .filter(c => {\r\n        if (!c.proximoVencimento || c.valorPago >= c.valorTotal) return false;\r\n        const venc = new Date(c.proximoVencimento);\r\n        return venc >= proximoMes && venc <= fimProximoMes;\r\n      })\r\n      .reduce((sum, c) => sum + (c.valorParcela || 0), 0);\r\n\r\n    // Despesas\r\n    const despesasTotais = despesas.reduce((sum, d) => sum + d.valor, 0);\r\n\r\n    // Lucro e Margem\r\n    const lucroOperacional = receitaRealizada - despesasTotais;\r\n    const margemLucro = receitaRealizada > 0 ? (lucroOperacional / receitaRealizada) * 100 : 0;\r\n\r\n    // Fluxo de Caixa\r\n    const fluxoCaixa = lucroOperacional;\r\n\r\n    // Clientes Ativos\r\n    const clientesAtivos = clientesArray.filter(c => c.valorPago > 0 || (c.proximoVencimento && new Date(c.proximoVencimento) >= hoje)).length;\r\n\r\n    setMetricas({\r\n      receitaRealizada,\r\n      receitaPrevista,\r\n      receitaPendente,\r\n      inadimplencia,\r\n      previsaoProximoMes,\r\n      despesasTotais,\r\n      lucroOperacional,\r\n      margemLucro,\r\n      fluxoCaixa,\r\n      clientesAtivos,\r\n      clientesInadimplentes\r\n    });\r\n  };\r\n\r\n  const formatMoney = (value) => {\r\n    return new Intl.NumberFormat('pt-BR', {\r\n      style: 'currency',\r\n      currency: 'BRL'\r\n    }).format(value);\r\n  };\r\n\r\n  // Função para formatação de input que lida com zero\r\n  const formatInputCurrency = (value) => {\r\n    // Se for string vazia, retorna string vazia\r\n    if (value === '') return '';\r\n    \r\n    // Converte para string e remove caracteres não numéricos\r\n    const apenasNumeros = value.toString().replace(/\\D/g, '');\r\n    \r\n    // Se não há números, retorna vazio\r\n    if (apenasNumeros === '') return '';\r\n    \r\n    // Converte para número em centavos\r\n    const numero = parseFloat(apenasNumeros) / 100;\r\n    \r\n    // Se for NaN ou zero, mostra R$ 0,00\r\n    if (isNaN(numero) || numero === 0) return 'R$ 0,00';\r\n    \r\n    // Formata normalmente\r\n    return numero.toLocaleString('pt-BR', {\r\n      style: 'currency',\r\n      currency: 'BRL'\r\n    });\r\n  };\r\n\r\n  // Função para exportar dados do dashboard\r\n  const exportarDashboard = () => {\r\n    const dataAtual = new Date().toLocaleDateString('pt-BR');\r\n    const periodoTexto = periodo === 'mes' ? 'Mensal' : periodo === 'trimestre' ? 'Trimestral' : 'Anual';\r\n    \r\n    // Preparar dados das métricas\r\n    const dadosMetricas = [\r\n      ['Relatório Financeiro', periodoTexto, dataAtual],\r\n      [''],\r\n      ['MÉTRICAS PRINCIPAIS'],\r\n      ['Receita Realizada', formatMoney(metricas.receitaRealizada)],\r\n      ['Lucro Operacional', formatMoney(metricas.lucroOperacional)],\r\n      ['Margem de Lucro', `${metricas.margemLucro.toFixed(2)}%`],\r\n      ['Receita Pendente', formatMoney(metricas.receitaPendente)],\r\n      ['Despesas Totais', formatMoney(metricas.despesasTotais)],\r\n      [''],\r\n      ['MÉTRICAS SECUNDÁRIAS'],\r\n      ['Taxa de Inadimplência', `${metricas.inadimplencia.toFixed(2)}%`],\r\n      ['Clientes Ativos', metricas.clientesAtivos.toString()],\r\n      ['Clientes Inadimplentes', metricas.clientesInadimplentes.toString()],\r\n      ['Previsão Próximo Mês', formatMoney(metricas.previsaoProximoMes)],\r\n      ['Meta Mensal', formatMoney(metaMensal)],\r\n      [''],\r\n      ['DESPESAS DETALHADAS']\r\n    ];\r\n\r\n    // Adicionar cabeçalhos das despesas\r\n    dadosMetricas.push(['Categoria', 'Valor', 'Tipo']);\r\n    \r\n    // Adicionar cada despesa\r\n    despesas.forEach(despesa => {\r\n      dadosMetricas.push([\r\n        despesa.categoria,\r\n        formatMoney(despesa.valor),\r\n        despesa.tipo === 'fixa' ? 'Fixa' : 'Variável'\r\n      ]);\r\n    });\r\n\r\n    // Converter para CSV\r\n    const csvContent = dadosMetricas\r\n      .map(row => row.map(cell => `\"${cell}\"`).join(','))\r\n      .join('\\n');\r\n\r\n    // Criar e baixar o arquivo\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `dashboard-financeiro-${dataAtual.replace(/\\//g, '-')}.csv`);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const MetricCard = ({ title, value, subtitle, icon: Icon, color, trend, highlight }) => (\r\n    <div className={`bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-all ${highlight ? 'ring-2 ring-blue-500' : ''}`}>\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className={`p-3 rounded-lg ${color}`}>\r\n          <Icon className=\"w-6 h-6\" />\r\n        </div>\r\n        {trend !== undefined && (\r\n          <div className={`flex items-center gap-1 text-sm font-medium ${\r\n            trend >= 0 ? 'text-green-600' : 'text-red-600'\r\n          }`}>\r\n            {trend >= 0 ? <ArrowUpRight className=\"w-4 h-4\" /> : <ArrowDownRight className=\"w-4 h-4\" />}\r\n            {Math.abs(trend).toFixed(1)}%\r\n          </div>\r\n        )}\r\n      </div>\r\n      <p className=\"text-sm text-gray-600 mb-1\">{title}</p>\r\n      <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\r\n      {subtitle && <p className=\"text-xs text-gray-500 mt-1\">{subtitle}</p>}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header com Filtros */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">Visão Geral Financeira</h2>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Acompanhamento em tempo real</p>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={() => setPeriodo('mes')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n              periodo === 'mes' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-100'\r\n            }`}\r\n          >\r\n            Mês\r\n          </button>\r\n          <button\r\n            onClick={() => setPeriodo('trimestre')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n              periodo === 'trimestre' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-100'\r\n            }`}\r\n          >\r\n            Trimestre\r\n          </button>\r\n          <button\r\n            onClick={() => setPeriodo('ano')}\r\n            className={`px-4 py-2 rounded-lg font-medium transition-colors ${\r\n              periodo === 'ano' ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-100'\r\n            }`}\r\n          >\r\n            Ano\r\n          </button>\r\n          <button\r\n            onClick={exportarDashboard}\r\n            className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n            title=\"Exportar dados do dashboard\"\r\n          >\r\n            <Download className=\"w-4 h-4\" />\r\n            Exportar\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* KPIs Principais */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <MetricCard\r\n          title=\"Receita Realizada\"\r\n          value={formatMoney(metricas.receitaRealizada)}\r\n          subtitle={`${((metricas.receitaRealizada / metricas.receitaPrevista) * 100 || 0).toFixed(1)}% do previsto`}\r\n          icon={DollarSign}\r\n          color=\"bg-green-100 text-green-600\"\r\n          highlight\r\n        />\r\n        \r\n        <MetricCard\r\n          title=\"Lucro Operacional\"\r\n          value={formatMoney(metricas.lucroOperacional)}\r\n          subtitle={`Margem: ${metricas.margemLucro.toFixed(1)}%`}\r\n          icon={TrendingUp}\r\n          color={metricas.lucroOperacional >= 0 ? \"bg-blue-100 text-blue-600\" : \"bg-red-100 text-red-600\"}\r\n        />\r\n        \r\n        <MetricCard\r\n          title=\"Receita Pendente\"\r\n          value={formatMoney(metricas.receitaPendente)}\r\n          subtitle=\"A receber\"\r\n          icon={Clock}\r\n          color=\"bg-yellow-100 text-yellow-600\"\r\n        />\r\n        \r\n        <MetricCard\r\n          title=\"Despesas Totais\"\r\n          value={formatMoney(metricas.despesasTotais)}\r\n          subtitle=\"Mês atual\"\r\n          icon={CreditCard}\r\n          color=\"bg-red-100 text-red-600\"\r\n        />\r\n      </div>\r\n\r\n      {/* Métricas Secundárias */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <MetricCard\r\n          title=\"Taxa de Inadimplência\"\r\n          value={`${metricas.inadimplencia.toFixed(1)}%`}\r\n          subtitle={`${metricas.clientesInadimplentes} clientes inadimplentes`}\r\n          icon={AlertCircle}\r\n          color={metricas.inadimplencia > 10 ? \"bg-red-100 text-red-600\" : \"bg-blue-100 text-blue-600\"}\r\n        />\r\n\r\n        <MetricCard\r\n          title=\"Clientes Ativos\"\r\n          value={metricas.clientesAtivos}\r\n          subtitle=\"Com contratos vigentes\"\r\n          icon={Briefcase}\r\n          color=\"bg-teal-100 text-teal-600\"\r\n        />\r\n      </div>\r\n\r\n      {/* Linha 2: Análises Detalhadas */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Fluxo de Caixa */}\r\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n          <div className=\"flex items-center gap-3 mb-4\">\r\n            <Wallet className=\"w-6 h-6 text-blue-600\" />\r\n            <h3 className=\"text-lg font-bold text-gray-900\">Fluxo de Caixa</h3>\r\n          </div>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <div className=\"flex justify-between text-sm mb-2\">\r\n                <span className=\"text-gray-600\">Entradas</span>\r\n                <span className=\"font-bold text-green-600\">{formatMoney(metricas.receitaRealizada)}</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-green-500 h-2 rounded-full\" \r\n                  style={{ width: `${Math.min((metricas.receitaRealizada / (metricas.receitaRealizada + metricas.despesasTotais)) * 100, 100)}%` }} \r\n                />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className=\"flex justify-between text-sm mb-2\">\r\n                <span className=\"text-gray-600\">Saídas</span>\r\n                <span className=\"font-bold text-red-600\">{formatMoney(metricas.despesasTotais)}</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-red-500 h-2 rounded-full\" \r\n                  style={{ width: `${Math.min((metricas.despesasTotais / (metricas.receitaRealizada + metricas.despesasTotais)) * 100, 100)}%` }} \r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"pt-4 border-t border-gray-200\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-sm font-medium text-gray-700\">Saldo Final</span>\r\n                <span className={`text-xl font-bold ${metricas.fluxoCaixa >= 0 ? 'text-green-600' : 'text-red-600'}`}>\r\n                  {formatMoney(metricas.fluxoCaixa)}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Previsão Próximo Mês */}\r\n        <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <Calendar className=\"w-6 h-6 text-blue-600\" />\r\n              <h3 className=\"text-lg font-bold text-blue-900\">Previsão Próximo Mês</h3>\r\n            </div>\r\n          </div>\r\n          <p className=\"text-3xl font-bold text-blue-900 mb-2\">\r\n            {formatMoney(metricas.previsaoProximoMes)}\r\n          </p>\r\n          <p className=\"text-sm text-blue-700 mb-4\">\r\n            Receita prevista com vencimentos\r\n          </p>\r\n          <div className=\"bg-white/50 rounded-lg p-3\">\r\n            <div className=\"flex items-center justify-between mb-1\">\r\n              <p className=\"text-xs text-blue-800 font-medium\">Meta Mensal</p>\r\n              <button\r\n                onClick={() => setModalMeta(true)}\r\n                className=\"text-blue-600 hover:text-blue-800\"\r\n                title=\"Editar meta\"\r\n              >\r\n                <Edit2 className=\"w-3 h-3\" />\r\n              </button>\r\n            </div>\r\n            <p className=\"text-lg font-bold text-blue-900\">{formatMoney(metaMensal)}</p>\r\n            <div className=\"mt-2 w-full bg-blue-200 rounded-full h-2\">\r\n              <div \r\n                className=\"bg-blue-600 h-2 rounded-full transition-all\"\r\n                style={{ width: `${Math.min((metricas.receitaRealizada / metaMensal) * 100, 100)}%` }}\r\n              />\r\n            </div>\r\n            <p className=\"text-xs text-blue-700 mt-1\">\r\n              {((metricas.receitaRealizada / metaMensal) * 100).toFixed(1)}% atingido\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Distribuição de Despesas */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <BarChart3 className=\"w-6 h-6 text-orange-600\" />\r\n              <h3 className=\"text-lg font-bold text-gray-900\">Distribuição de Despesas</h3>\r\n            </div>\r\n            <button\r\n              onClick={() => setModalDespesas(true)}\r\n              className=\"flex items-center gap-1 text-sm bg-orange-100 text-orange-700 px-3 py-1 rounded-lg hover:bg-orange-200 transition-colors\"\r\n            >\r\n              <Edit2 className=\"w-3 h-3\" />\r\n              Editar\r\n            </button>\r\n          </div>\r\n          <div className=\"space-y-3\">\r\n            {despesas.length > 0 ? despesas.map((despesa, index) => (\r\n              <div key={index}>\r\n                <div className=\"flex justify-between text-sm mb-1\">\r\n                  <span className=\"text-gray-700\">{despesa.categoria}</span>\r\n                  <span className=\"font-medium\">{formatMoney(despesa.valor)}</span>\r\n                </div>\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                  <div \r\n                    className={`h-2 rounded-full ${despesa.tipo === 'fixa' ? 'bg-orange-500' : 'bg-blue-500'}`}\r\n                    style={{ width: `${(despesa.valor / metricas.despesasTotais) * 100}%` }}\r\n                  />\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  {((despesa.valor / metricas.despesasTotais) * 100).toFixed(1)}% do total • {despesa.tipo === 'fixa' ? 'Fixa' : 'Variável'}\r\n                </p>\r\n              </div>\r\n            )) : (\r\n              <p className=\"text-gray-500 text-center py-4\">Nenhuma despesa cadastrada</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Saúde Financeira */}\r\n        <div className=\"bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500\">\r\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Indicadores de Saúde</h3>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <div className=\"flex justify-between text-sm mb-2\">\r\n                <span className=\"text-gray-600\">Margem de Lucro</span>\r\n                <span className=\"font-medium\">{metricas.margemLucro.toFixed(1)}%</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className={`h-2 rounded-full ${metricas.margemLucro >= 20 ? 'bg-green-600' : metricas.margemLucro >= 10 ? 'bg-yellow-600' : 'bg-red-600'}`}\r\n                  style={{ width: `${Math.min(Math.abs(metricas.margemLucro) * 2, 100)}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"flex justify-between text-sm mb-2\">\r\n                <span className=\"text-gray-600\">Taxa de Recebimento</span>\r\n                <span className=\"font-medium\">\r\n                  {((metricas.receitaRealizada / metricas.receitaPrevista) * 100 || 0).toFixed(1)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"bg-blue-600 h-2 rounded-full\"\r\n                  style={{ width: `${(metricas.receitaRealizada / metricas.receitaPrevista) * 100 || 0}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"flex justify-between text-sm mb-2\">\r\n                <span className=\"text-gray-600\">Inadimplência</span>\r\n                <span className=\"font-medium\">{metricas.inadimplencia.toFixed(1)}%</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                <div \r\n                  className={`h-2 rounded-full ${metricas.inadimplencia > 10 ? 'bg-red-600' : 'bg-green-600'}`}\r\n                  style={{ width: `${Math.min(metricas.inadimplencia * 5, 100)}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"pt-4 border-t border-gray-200\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <CheckCircle className={`w-5 h-5 ${\r\n                  metricas.margemLucro >= 15 && metricas.inadimplencia < 10\r\n                    ? 'text-green-600'\r\n                    : 'text-yellow-600'\r\n                }`} />\r\n                <span className={`text-sm font-medium ${\r\n                  metricas.margemLucro >= 15 && metricas.inadimplencia < 10\r\n                    ? 'text-green-600'\r\n                    : 'text-yellow-600'\r\n                }`}>\r\n                  {metricas.margemLucro >= 15 && metricas.inadimplencia < 10\r\n                    ? 'Empresa financeiramente saudável'\r\n                    : 'Atenção aos indicadores'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Alertas e Recomendações */}\r\n      <div className=\"space-y-4\">\r\n        {metricas.inadimplencia > 10 && (\r\n          <div className=\"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <AlertCircle className=\"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <h4 className=\"text-red-800 font-bold mb-1\">Alta Taxa de Inadimplência</h4>\r\n                <p className=\"text-red-700 text-sm\">\r\n                  {metricas.clientesInadimplentes} clientes com pagamentos atrasados. Recomenda-se intensificar a cobrança usando o sistema de email marketing.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {metricas.margemLucro < 10 && metricas.receitaRealizada > 0 && (\r\n          <div className=\"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <AlertCircle className=\"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <h4 className=\"text-yellow-800 font-bold mb-1\">Margem de Lucro Baixa</h4>\r\n                <p className=\"text-yellow-700 text-sm\">\r\n                  Margem atual de {metricas.margemLucro.toFixed(1)}%. Considere revisar preços dos serviços ou reduzir custos operacionais.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {metricas.lucroOperacional > 0 && metricas.inadimplencia < 10 && metricas.margemLucro >= 15 && (\r\n          <div className=\"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <CheckCircle className=\"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5\" />\r\n              <div>\r\n                <h4 className=\"text-green-800 font-bold mb-1\">Desempenho Excelente</h4>\r\n                <p className=\"text-green-700 text-sm\">\r\n                  Seus indicadores financeiros estão saudáveis. Continue monitorando e considere expansão de serviços.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal para editar despesas */}\r\n      {modalDespesas && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md max-h-[80vh] overflow-y-auto\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-bold text-gray-900\">Gerenciar Despesas</h3>\r\n              <button\r\n                onClick={() => setModalDespesas(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X className=\"w-6 h-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Formulário para adicionar/editar */}\r\n            <div className=\"space-y-4 mb-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Categoria\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={novaDespesa.categoria}\r\n                  onChange={(e) => setNovaDespesa({...novaDespesa, categoria: e.target.value})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"Ex: Aluguel, Marketing...\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Valor (R$)\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formatInputCurrency(novaDespesa.valor)}\r\n                  onChange={(e) => {\r\n                    let valor = e.target.value.replace(/\\D/g, '');\r\n                    valor = valor.substring(0, 10);\r\n                    \r\n                    // Permite que o usuário digite apenas \"0\"\r\n                    if (valor === '') {\r\n                      setNovaDespesa({...novaDespesa, valor: ''});\r\n                    } else if (valor === '0') {\r\n                      setNovaDespesa({...novaDespesa, valor: '0'});\r\n                    } else {\r\n                      // Remove zeros à esquerda (exceto se for \"0\")\r\n                      valor = valor.replace(/^0+/, '');\r\n                      setNovaDespesa({...novaDespesa, valor: valor});\r\n                    }\r\n                  }}\r\n                  onKeyDown={(e) => {\r\n                    // Permite apagar completamente o campo\r\n                    if (e.key === 'Backspace' && novaDespesa.valor === '0') {\r\n                      setNovaDespesa({...novaDespesa, valor: ''});\r\n                    }\r\n                  }}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"R$ 0,00\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Tipo\r\n                </label>\r\n                <select\r\n                  value={novaDespesa.tipo}\r\n                  onChange={(e) => setNovaDespesa({...novaDespesa, tipo: e.target.value})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                >\r\n                  <option value=\"fixa\">Fixa</option>\r\n                  <option value=\"variavel\">Variável</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                {editandoDespesa !== null ? (\r\n                  <>\r\n                    <button\r\n                      onClick={salvarEdicaoDespesa}\r\n                      className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      <Save className=\"w-4 h-4 inline mr-1\" />\r\n                      Salvar\r\n                    </button>\r\n                    <button\r\n                      onClick={cancelarEdicao}\r\n                      className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                    >\r\n                      Cancelar\r\n                    </button>\r\n                  </>\r\n                ) : (\r\n                  <button\r\n                    onClick={adicionarDespesa}\r\n                    className=\"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors\"\r\n                  >\r\n                    <Plus className=\"w-4 h-4 inline mr-1\" />\r\n                    Adicionar\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Lista de despesas */}\r\n            <div className=\"space-y-2\">\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Despesas Cadastradas</h4>\r\n              {despesas.map((despesa, index) => (\r\n                <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                  <div>\r\n                    <p className=\"font-medium text-gray-900\">{despesa.categoria}</p>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      {formatMoney(despesa.valor)} • {despesa.tipo === 'fixa' ? 'Fixa' : 'Variável'}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"flex gap-1\">\r\n                    <button\r\n                      onClick={() => editarDespesa(index)}\r\n                      className=\"p-1 text-blue-600 hover:bg-blue-100 rounded\"\r\n                      title=\"Editar\"\r\n                    >\r\n                      <Edit2 className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => removerDespesa(index)}\r\n                      className=\"p-1 text-red-600 hover:bg-red-100 rounded\"\r\n                      title=\"Remover\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal para editar meta */}\r\n      {modalMeta && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-sm\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-bold text-gray-900\">Editar Meta Mensal</h3>\r\n              <button\r\n                onClick={() => setModalMeta(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X className=\"w-6 h-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Meta Mensal (R$)\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={metaMensal === 0 ? 'R$ 0,00' : formatInputCurrency(Math.round(metaMensal * 100).toString())}\r\n                  onChange={(e) => {\r\n                    let valor = e.target.value.replace(/\\D/g, '');\r\n                    valor = valor.substring(0, 10);\r\n                    \r\n                    if (valor === '') {\r\n                      setMetaMensal(0);\r\n                    } else if (valor === '0') {\r\n                      setMetaMensal(0);\r\n                    } else {\r\n                      // Remove zeros à esquerda e converte para número\r\n                      valor = valor.replace(/^0+/, '');\r\n                      setMetaMensal(parseFloat(valor) / 100);\r\n                    }\r\n                  }}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"R$ 0,00\"\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <button\r\n                  onClick={() => setModalMeta(false)}\r\n                  className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  <Save className=\"w-4 h-4 inline mr-1\" />\r\n                  Salvar\r\n                </button>\r\n                <button\r\n                  onClick={() => setModalMeta(false)}\r\n                  className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  Cancelar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardFinanceiro;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ResTIC16\\\\Desktop\\\\gest-o-financeira\\\\frontend\\\\src\\\\components\\\\ProfileMenu.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { LogOut, Settings, Upload, X, Shield, Workflow } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabaseClient';\nimport PipefyIntegration from './PipefyIntegration';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfileMenu = ({\n  pipefy\n}) => {\n  _s();\n  var _user$email;\n  const {\n    user,\n    signOut,\n    updateUserProfile,\n    getUserProfile,\n    isAdmin\n  } = useAuth();\n  const navigate = useNavigate();\n  const [isOpen, setIsOpen] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showPipefyModal, setShowPipefyModal] = useState(false);\n  const [userProfile, setUserProfile] = useState({\n    nome: '',\n    email: (user === null || user === void 0 ? void 0 : user.email) || '',\n    fotoUrl: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState({\n    type: '',\n    text: ''\n  });\n  const fileInputRef = useRef(null);\n  const dropdownRef = useRef(null);\n  useEffect(() => {\n    const carregarPerfil = async () => {\n      if (user !== null && user !== void 0 && user.id) {\n        try {\n          const profile = await getUserProfile(user.id);\n          if (profile) {\n            setUserProfile({\n              nome: profile.nome || '',\n              email: profile.email || (user === null || user === void 0 ? void 0 : user.email) || '',\n              fotoUrl: profile.foto_url || ''\n            });\n          } else {\n            setUserProfile({\n              nome: '',\n              email: (user === null || user === void 0 ? void 0 : user.email) || '',\n              fotoUrl: ''\n            });\n          }\n        } catch (error) {\n          console.error('Erro ao carregar perfil:', error);\n          // Usar email como fallback\n          setUserProfile({\n            nome: '',\n            email: (user === null || user === void 0 ? void 0 : user.email) || '',\n            fotoUrl: ''\n          });\n        }\n      }\n    };\n    carregarPerfil();\n  }, [user]);\n\n  // Fechar dropdown ao clicar fora\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n  const handleFileSelect = async e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!file || !(user !== null && user !== void 0 && user.id)) return;\n\n    // Validar tamanho (máx 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      setMessage({\n        type: 'error',\n        text: 'Arquivo muito grande. Máximo 5MB.'\n      });\n      return;\n    }\n    setLoading(true);\n    try {\n      // Fazer upload da foto\n      const fileExt = file.name.split('.').pop();\n      const fileName = `${user.id}-${Date.now()}.${fileExt}`;\n      const filePath = `profile-pictures/${fileName}`;\n      const {\n        error: uploadError\n      } = await supabase.storage.from('avatars').upload(filePath, file, {\n        upsert: true\n      });\n      if (uploadError) throw uploadError;\n\n      // Obter URL pública\n      const {\n        data: {\n          publicUrl\n        }\n      } = supabase.storage.from('avatars').getPublicUrl(filePath);\n\n      // Atualizar no banco de dados\n      const {\n        error: updateError\n      } = await supabase.from('profiles').update({\n        foto_url: publicUrl\n      }).eq('id', user.id);\n      if (updateError) throw updateError;\n      setUserProfile({\n        ...userProfile,\n        fotoUrl: publicUrl\n      });\n      setMessage({\n        type: 'success',\n        text: 'Foto atualizada com sucesso!'\n      });\n    } catch (error) {\n      console.error('Erro ao fazer upload:', error);\n      setMessage({\n        type: 'error',\n        text: 'Erro ao atualizar foto'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSaveProfile = async () => {\n    if (!userProfile.nome.trim()) {\n      setMessage({\n        type: 'error',\n        text: 'Nome não pode estar vazio'\n      });\n      return;\n    }\n    setLoading(true);\n    try {\n      const result = await updateUserProfile({\n        nome: userProfile.nome,\n        email: userProfile.email\n      });\n      if (result.error) {\n        setMessage({\n          type: 'error',\n          text: result.error\n        });\n      } else {\n        setMessage({\n          type: 'success',\n          text: 'Perfil atualizado com sucesso!'\n        });\n        setTimeout(() => {\n          setShowEditModal(false);\n          setMessage({\n            type: '',\n            text: ''\n          });\n        }, 2000);\n      }\n    } catch (error) {\n      setMessage({\n        type: 'error',\n        text: 'Erro ao salvar perfil'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleLogout = async () => {\n    await signOut();\n  };\n  const inicialNome = userProfile.nome ? userProfile.nome.split(' ')[0][0].toUpperCase() : (user === null || user === void 0 ? void 0 : (_user$email = user.email) === null || _user$email === void 0 ? void 0 : _user$email[0].toUpperCase()) || 'U';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    ref: dropdownRef,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsOpen(!isOpen),\n      className: \"flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 text-white font-bold hover:shadow-lg transition-all hover:scale-110 border-2 border-white\",\n      children: userProfile.fotoUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: userProfile.fotoUrl,\n        alt: \"Perfil\",\n        className: \"w-full h-full rounded-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this) : inicialNome\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 z-50 py-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 py-3 border-b border-gray-200 bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm font-semibold text-gray-900\",\n          children: userProfile.nome || 'Usuário'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-600 truncate\",\n          children: userProfile.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setShowEditModal(true);\n          setIsOpen(false);\n        },\n        className: \"w-full flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors text-left\",\n        children: [/*#__PURE__*/_jsxDEV(Settings, {\n          className: \"w-5 h-5 text-blue-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm font-medium\",\n          children: \"Configura\\xE7\\xF5es\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          navigate('/admin');\n          setIsOpen(false);\n        },\n        className: \"w-full flex items-center gap-3 px-4 py-3 text-purple-700 hover:bg-purple-50 transition-colors text-left\",\n        children: [/*#__PURE__*/_jsxDEV(Shield, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm font-medium\",\n          children: \"Painel de Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setShowPipefyModal(true);\n          setIsOpen(false);\n        },\n        className: \"w-full flex items-center gap-3 px-4 py-3 text-emerald-700 hover:bg-emerald-50 transition-colors text-left\",\n        children: [/*#__PURE__*/_jsxDEV(Workflow, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm font-medium\",\n          children: \"Pipefy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        className: \"w-full flex items-center gap-3 px-4 py-3 text-red-700 hover:bg-red-50 transition-colors text-left border-t border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(LogOut, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm font-medium\",\n          children: \"Sair\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this), showEditModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl max-w-md w-full mx-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-6 border-b border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold text-gray-900\",\n            children: \"Editar Perfil\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowEditModal(false);\n              setMessage({\n                type: '',\n                text: ''\n              });\n            },\n            className: \"text-gray-500 hover:text-gray-700\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-20 h-20 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 text-white font-bold text-2xl flex items-center justify-center mb-4 overflow-hidden border-4 border-gray-200\",\n              children: userProfile.fotoUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: userProfile.fotoUrl,\n                alt: \"Perfil\",\n                className: \"w-full h-full object-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this) : inicialNome\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              ref: fileInputRef,\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleFileSelect,\n              className: \"hidden\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _fileInputRef$current;\n                return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n              },\n              disabled: loading,\n              className: \"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this), loading ? 'Enviando...' : 'Alterar Foto']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Nome\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: userProfile.nome,\n              onChange: e => setUserProfile({\n                ...userProfile,\n                nome: e.target.value\n              }),\n              className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n              placeholder: \"Digite seu nome\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              value: userProfile.email,\n              onChange: e => setUserProfile({\n                ...userProfile,\n                email: e.target.value\n              }),\n              className: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n              placeholder: \"seu@email.com\",\n              disabled: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-3 rounded-lg text-sm font-medium ${message.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n            children: message.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3 p-6 border-t border-gray-200 bg-gray-50\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setShowEditModal(false);\n              setMessage({\n                type: '',\n                text: ''\n              });\n            },\n            disabled: loading,\n            className: \"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSaveProfile,\n            disabled: loading,\n            className: \"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\",\n            children: loading ? 'Salvando...' : 'Salvar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }, this), showPipefyModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-6 border-b border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold text-gray-900\",\n            children: \"Integra\\xE7\\xE3o Pipefy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowPipefyModal(false),\n            className: \"text-gray-500 hover:text-gray-700\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: /*#__PURE__*/_jsxDEV(PipefyIntegration, {\n            clientes: (pipefy === null || pipefy === void 0 ? void 0 : pipefy.clientes) || [],\n            onImportCards: pipefy === null || pipefy === void 0 ? void 0 : pipefy.onImportCards\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n};\n_s(ProfileMenu, \"G62VhXXofR1yuIjXhwO2+dHCnAE=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = ProfileMenu;\nexport default ProfileMenu;\nvar _c;\n$RefreshReg$(_c, \"ProfileMenu\");","map":{"version":3,"names":["React","useState","useRef","useEffect","LogOut","Settings","Upload","X","Shield","Workflow","useAuth","useNavigate","supabase","PipefyIntegration","jsxDEV","_jsxDEV","ProfileMenu","pipefy","_s","_user$email","user","signOut","updateUserProfile","getUserProfile","isAdmin","navigate","isOpen","setIsOpen","showEditModal","setShowEditModal","showPipefyModal","setShowPipefyModal","userProfile","setUserProfile","nome","email","fotoUrl","loading","setLoading","message","setMessage","type","text","fileInputRef","dropdownRef","carregarPerfil","id","profile","foto_url","error","console","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleFileSelect","e","_e$target$files","file","files","size","fileExt","name","split","pop","fileName","Date","now","filePath","uploadError","storage","from","upload","upsert","data","publicUrl","getPublicUrl","updateError","update","eq","handleSaveProfile","trim","result","setTimeout","handleLogout","inicialNome","toUpperCase","className","ref","children","onClick","src","alt","_jsxFileName","lineNumber","columnNumber","accept","onChange","disabled","_fileInputRef$current","click","value","placeholder","clientes","onImportCards","_c","$RefreshReg$"],"sources":["C:/Users/ResTIC16/Desktop/gest-o-financeira/frontend/src/components/ProfileMenu.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { LogOut, Settings, Upload, X, Shield, Workflow } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabaseClient';\nimport PipefyIntegration from './PipefyIntegration';\n\nconst ProfileMenu = ({ pipefy }) => {\n  const { user, signOut, updateUserProfile, getUserProfile, isAdmin } = useAuth();\n  const navigate = useNavigate();\n  const [isOpen, setIsOpen] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showPipefyModal, setShowPipefyModal] = useState(false);\n  const [userProfile, setUserProfile] = useState({\r\n    nome: '',\r\n    email: user?.email || '',\r\n    fotoUrl: '',\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const fileInputRef = useRef(null);\r\n  const dropdownRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const carregarPerfil = async () => {\r\n      if (user?.id) {\r\n        try {\r\n          const profile = await getUserProfile(user.id);\r\n          if (profile) {\r\n            setUserProfile({\r\n              nome: profile.nome || '',\r\n              email: profile.email || user?.email || '',\r\n              fotoUrl: profile.foto_url || '',\r\n            });\r\n          } else {\r\n            setUserProfile({\r\n              nome: '',\r\n              email: user?.email || '',\r\n              fotoUrl: '',\r\n            });\r\n          }\r\n        } catch (error) {\r\n          console.error('Erro ao carregar perfil:', error);\r\n          // Usar email como fallback\r\n          setUserProfile({\r\n            nome: '',\r\n            email: user?.email || '',\r\n            fotoUrl: '',\r\n          });\r\n        }\r\n      }\r\n    };\r\n    carregarPerfil();\r\n  }, [user]);\r\n\r\n  // Fechar dropdown ao clicar fora\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const handleFileSelect = async (e) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file || !user?.id) return;\r\n\r\n    // Validar tamanho (máx 5MB)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      setMessage({ type: 'error', text: 'Arquivo muito grande. Máximo 5MB.' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Fazer upload da foto\r\n      const fileExt = file.name.split('.').pop();\r\n      const fileName = `${user.id}-${Date.now()}.${fileExt}`;\r\n      const filePath = `profile-pictures/${fileName}`;\r\n\r\n      const { error: uploadError } = await supabase.storage\r\n        .from('avatars')\r\n        .upload(filePath, file, { upsert: true });\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      // Obter URL pública\r\n      const { data: { publicUrl } } = supabase.storage\r\n        .from('avatars')\r\n        .getPublicUrl(filePath);\r\n\r\n      // Atualizar no banco de dados\r\n      const { error: updateError } = await supabase\r\n        .from('profiles')\r\n        .update({ foto_url: publicUrl })\r\n        .eq('id', user.id);\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      setUserProfile({ ...userProfile, fotoUrl: publicUrl });\r\n      setMessage({ type: 'success', text: 'Foto atualizada com sucesso!' });\r\n    } catch (error) {\r\n      console.error('Erro ao fazer upload:', error);\r\n      setMessage({ type: 'error', text: 'Erro ao atualizar foto' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveProfile = async () => {\r\n    if (!userProfile.nome.trim()) {\r\n      setMessage({ type: 'error', text: 'Nome não pode estar vazio' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const result = await updateUserProfile({\r\n        nome: userProfile.nome,\r\n        email: userProfile.email,\r\n      });\r\n\r\n      if (result.error) {\r\n        setMessage({ type: 'error', text: result.error });\r\n      } else {\r\n        setMessage({ type: 'success', text: 'Perfil atualizado com sucesso!' });\r\n        setTimeout(() => {\r\n          setShowEditModal(false);\r\n          setMessage({ type: '', text: '' });\r\n        }, 2000);\r\n      }\r\n    } catch (error) {\r\n      setMessage({ type: 'error', text: 'Erro ao salvar perfil' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await signOut();\r\n  };\r\n\r\n  const inicialNome = userProfile.nome\r\n    ? userProfile.nome.split(' ')[0][0].toUpperCase()\r\n    : user?.email?.[0].toUpperCase() || 'U';\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      {/* Avatar */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 text-white font-bold hover:shadow-lg transition-all hover:scale-110 border-2 border-white\"\r\n      >\r\n        {userProfile.fotoUrl ? (\r\n          <img\r\n            src={userProfile.fotoUrl}\r\n            alt=\"Perfil\"\r\n            className=\"w-full h-full rounded-full object-cover\"\r\n          />\r\n        ) : (\r\n          inicialNome\r\n        )}\r\n      </button>\r\n\r\n      {/* Dropdown Menu */}\r\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 z-50 py-2\">\n          {/* Cabeçalho do Perfil */}\r\n          <div className=\"px-4 py-3 border-b border-gray-200 bg-gray-50\">\r\n            <p className=\"text-sm font-semibold text-gray-900\">\r\n              {userProfile.nome || 'Usuário'}\r\n            </p>\r\n            <p className=\"text-xs text-gray-600 truncate\">{userProfile.email}</p>\r\n          </div>\r\n\r\n          {/* Opções */}\r\n          <button\r\n            onClick={() => {\r\n              setShowEditModal(true);\r\n              setIsOpen(false);\r\n            }}\r\n            className=\"w-full flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors text-left\"\r\n          >\r\n            <Settings className=\"w-5 h-5 text-blue-600\" />\r\n            <span className=\"text-sm font-medium\">Configurações</span>\r\n          </button>\r\n\r\n          {/* Painel Admin - Apenas para admins */}\n          {isAdmin && (\n            <button\n              onClick={() => {\n                navigate('/admin');\n                setIsOpen(false);\n              }}\n              className=\"w-full flex items-center gap-3 px-4 py-3 text-purple-700 hover:bg-purple-50 transition-colors text-left\"\n            >\n              <Shield className=\"w-5 h-5\" />\n              <span className=\"text-sm font-medium\">Painel de Admin</span>\n            </button>\n          )}\n\n          {isAdmin && (\n            <button\n              onClick={() => {\n                setShowPipefyModal(true);\n                setIsOpen(false);\n              }}\n              className=\"w-full flex items-center gap-3 px-4 py-3 text-emerald-700 hover:bg-emerald-50 transition-colors text-left\"\n            >\n              <Workflow className=\"w-5 h-5\" />\n              <span className=\"text-sm font-medium\">Pipefy</span>\n            </button>\n          )}\n\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"w-full flex items-center gap-3 px-4 py-3 text-red-700 hover:bg-red-50 transition-colors text-left border-t border-gray-200\"\r\n          >\r\n            <LogOut className=\"w-5 h-5\" />\r\n            <span className=\"text-sm font-medium\">Sair</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal de Edição de Perfil */}\n      {showEditModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Editar Perfil</h2>\r\n              <button\r\n                onClick={() => {\r\n                  setShowEditModal(false);\r\n                  setMessage({ type: '', text: '' });\r\n                }}\r\n                className=\"text-gray-500 hover:text-gray-700\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Conteúdo */}\r\n            <div className=\"p-6 space-y-4\">\r\n              {/* Foto de Perfil */}\r\n              <div className=\"flex flex-col items-center\">\r\n                <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 text-white font-bold text-2xl flex items-center justify-center mb-4 overflow-hidden border-4 border-gray-200\">\r\n                  {userProfile.fotoUrl ? (\r\n                    <img\r\n                      src={userProfile.fotoUrl}\r\n                      alt=\"Perfil\"\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  ) : (\r\n                    inicialNome\r\n                  )}\r\n                </div>\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleFileSelect}\r\n                  className=\"hidden\"\r\n                  disabled={loading}\r\n                />\r\n                <button\r\n                  onClick={() => fileInputRef.current?.click()}\r\n                  disabled={loading}\r\n                  className=\"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n                >\r\n                  <Upload className=\"w-4 h-4\" />\r\n                  {loading ? 'Enviando...' : 'Alterar Foto'}\r\n                </button>\r\n              </div>\r\n\r\n              {/* Nome */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Nome\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={userProfile.nome}\r\n                  onChange={(e) =>\r\n                    setUserProfile({ ...userProfile, nome: e.target.value })\r\n                  }\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"Digite seu nome\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n\r\n              {/* Email */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={userProfile.email}\r\n                  onChange={(e) =>\r\n                    setUserProfile({ ...userProfile, email: e.target.value })\r\n                  }\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"seu@email.com\"\r\n                  disabled={loading}\r\n                />\r\n              </div>\r\n\r\n              {/* Mensagem */}\r\n              {message.text && (\r\n                <div\r\n                  className={`p-3 rounded-lg text-sm font-medium ${\r\n                    message.type === 'success'\r\n                      ? 'bg-green-100 text-green-800'\r\n                      : 'bg-red-100 text-red-800'\r\n                  }`}\r\n                >\r\n                  {message.text}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"flex gap-3 p-6 border-t border-gray-200 bg-gray-50\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowEditModal(false);\r\n                  setMessage({ type: '', text: '' });\r\n                }}\r\n                disabled={loading}\r\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                onClick={handleSaveProfile}\r\n                disabled={loading}\r\n                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n              >\r\n                {loading ? 'Salvando...' : 'Salvar'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\n\n      {/* Modal Pipefy */}\n      {showPipefyModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Integração Pipefy</h2>\n              <button\n                onClick={() => setShowPipefyModal(false)}\n                className=\"text-gray-500 hover:text-gray-700\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n            <div className=\"p-6\">\n              <PipefyIntegration\n                clientes={pipefy?.clientes || []}\n                onImportCards={pipefy?.onImportCards}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileMenu;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
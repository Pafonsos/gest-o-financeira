{"ast":null,"code":"import axios from 'axios';\nimport { supabase } from '../lib/supabaseClient';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nconst axiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nconst withAuthHeaders = async () => {\n  const {\n    data: {\n      session\n    }\n  } = await supabase.auth.getSession();\n  const token = session === null || session === void 0 ? void 0 : session.access_token;\n  if (!token) {\n    throw new Error('Usuário não autenticado');\n  }\n  return {\n    Authorization: `Bearer ${token}`\n  };\n};\nconst pipefyService = {\n  testConnection: async () => {\n    const headers = await withAuthHeaders();\n    const response = await axiosInstance.post('/pipefy/test', {}, {\n      headers\n    });\n    return response.data;\n  },\n  getPipeFields: async pipeId => {\n    const headers = await withAuthHeaders();\n    const response = await axiosInstance.post('/pipefy/pipe-fields', {\n      pipeId\n    }, {\n      headers\n    });\n    return response.data;\n  },\n  pushClients: async ({\n    pipeId,\n    clients,\n    fieldMap,\n    titleField\n  }) => {\n    const headers = await withAuthHeaders();\n    const response = await axiosInstance.post('/pipefy/push-clients', {\n      pipeId,\n      clients,\n      fieldMap,\n      titleField\n    }, {\n      headers\n    });\n    return response.data;\n  },\n  pullCards: async ({\n    pipeId,\n    limit\n  }) => {\n    const headers = await withAuthHeaders();\n    const response = await axiosInstance.post('/pipefy/pull-cards', {\n      pipeId,\n      limit\n    }, {\n      headers\n    });\n    return response.data;\n  }\n};\nexport default pipefyService;","map":{"version":3,"names":["axios","supabase","API_BASE_URL","process","env","REACT_APP_API_URL","axiosInstance","create","baseURL","timeout","headers","withAuthHeaders","data","session","auth","getSession","token","access_token","Error","Authorization","pipefyService","testConnection","response","post","getPipeFields","pipeId","pushClients","clients","fieldMap","titleField","pullCards","limit"],"sources":["C:/Users/ResTIC16/Desktop/gest-o-financeira/frontend/src/services/pipefyService.js"],"sourcesContent":["import axios from 'axios';\nimport { supabase } from '../lib/supabaseClient';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\nconst axiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\nconst withAuthHeaders = async () => {\n  const { data: { session } } = await supabase.auth.getSession();\n  const token = session?.access_token;\n  if (!token) {\n    throw new Error('Usuário não autenticado');\n  }\n  return {\n    Authorization: `Bearer ${token}`\n  };\n};\n\nconst pipefyService = {\n  testConnection: async () => {\n    const headers = await withAuthHeaders();\n    const response = await axiosInstance.post('/pipefy/test', {}, { headers });\n    return response.data;\n  },\n\n  getPipeFields: async (pipeId) => {\n    const headers = await withAuthHeaders();\n    const response = await axiosInstance.post('/pipefy/pipe-fields', { pipeId }, { headers });\n    return response.data;\n  },\n\n  pushClients: async ({ pipeId, clients, fieldMap, titleField }) => {\n    const headers = await withAuthHeaders();\n    const response = await axiosInstance.post(\n      '/pipefy/push-clients',\n      { pipeId, clients, fieldMap, titleField },\n      { headers }\n    );\n    return response.data;\n  },\n\n  pullCards: async ({ pipeId, limit }) => {\n    const headers = await withAuthHeaders();\n    const response = await axiosInstance.post('/pipefy/pull-cards', { pipeId, limit }, { headers });\n    return response.data;\n  }\n};\n\nexport default pipefyService;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,uBAAuB;AAEhD,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAEjF,MAAMC,aAAa,GAAGN,KAAK,CAACO,MAAM,CAAC;EACjCC,OAAO,EAAEN,YAAY;EACrBO,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEF,MAAMC,eAAe,GAAG,MAAAA,CAAA,KAAY;EAClC,MAAM;IAAEC,IAAI,EAAE;MAAEC;IAAQ;EAAE,CAAC,GAAG,MAAMZ,QAAQ,CAACa,IAAI,CAACC,UAAU,CAAC,CAAC;EAC9D,MAAMC,KAAK,GAAGH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI,YAAY;EACnC,IAAI,CAACD,KAAK,EAAE;IACV,MAAM,IAAIE,KAAK,CAAC,yBAAyB,CAAC;EAC5C;EACA,OAAO;IACLC,aAAa,EAAE,UAAUH,KAAK;EAChC,CAAC;AACH,CAAC;AAED,MAAMI,aAAa,GAAG;EACpBC,cAAc,EAAE,MAAAA,CAAA,KAAY;IAC1B,MAAMX,OAAO,GAAG,MAAMC,eAAe,CAAC,CAAC;IACvC,MAAMW,QAAQ,GAAG,MAAMhB,aAAa,CAACiB,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE;MAAEb;IAAQ,CAAC,CAAC;IAC1E,OAAOY,QAAQ,CAACV,IAAI;EACtB,CAAC;EAEDY,aAAa,EAAE,MAAOC,MAAM,IAAK;IAC/B,MAAMf,OAAO,GAAG,MAAMC,eAAe,CAAC,CAAC;IACvC,MAAMW,QAAQ,GAAG,MAAMhB,aAAa,CAACiB,IAAI,CAAC,qBAAqB,EAAE;MAAEE;IAAO,CAAC,EAAE;MAAEf;IAAQ,CAAC,CAAC;IACzF,OAAOY,QAAQ,CAACV,IAAI;EACtB,CAAC;EAEDc,WAAW,EAAE,MAAAA,CAAO;IAAED,MAAM;IAAEE,OAAO;IAAEC,QAAQ;IAAEC;EAAW,CAAC,KAAK;IAChE,MAAMnB,OAAO,GAAG,MAAMC,eAAe,CAAC,CAAC;IACvC,MAAMW,QAAQ,GAAG,MAAMhB,aAAa,CAACiB,IAAI,CACvC,sBAAsB,EACtB;MAAEE,MAAM;MAAEE,OAAO;MAAEC,QAAQ;MAAEC;IAAW,CAAC,EACzC;MAAEnB;IAAQ,CACZ,CAAC;IACD,OAAOY,QAAQ,CAACV,IAAI;EACtB,CAAC;EAEDkB,SAAS,EAAE,MAAAA,CAAO;IAAEL,MAAM;IAAEM;EAAM,CAAC,KAAK;IACtC,MAAMrB,OAAO,GAAG,MAAMC,eAAe,CAAC,CAAC;IACvC,MAAMW,QAAQ,GAAG,MAAMhB,aAAa,CAACiB,IAAI,CAAC,oBAAoB,EAAE;MAAEE,MAAM;MAAEM;IAAM,CAAC,EAAE;MAAErB;IAAQ,CAAC,CAAC;IAC/F,OAAOY,QAAQ,CAACV,IAAI;EACtB;AACF,CAAC;AAED,eAAeQ,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}